[{"id":"efcaa2c64bf258cb","type":"function","z":"42b80b6e8265249a","name":"Range Check","func":"const Range_Checking = {\n    P1: { min: 0, max: 10 },\n    P2: { min: 0, max: 40 },\n    P3: { min: 0, max: 10 },\n    P4: { min: 0, max: 60 },\n    P6: { min: 0, max: 60 },\n    P8: { min: 0, max: 60 },\n    t1: { min: 0, max: 100 },\n    t3: { min: 0, max: 100 }\n};\n\nconst sensorNavn = msg.topic;\nconst vaerdi = parseFloat(msg.payload);\n\n// Tjek om sensoren findes i listen\nif (Range_Checking.hasOwnProperty(sensorNavn)) {\n    const limits = Range_Checking[sensorNavn];\n\n    // Sikkerhedstjek: Er det overhovedet et tal?\n    if (isNaN(vaerdi)) {\n        node.status({fill:\"red\",shape:\"ring\",text:\"NAN Fejl\"});\n        msg.payload = \"Fejl: \" + sensorNavn + \" sendte ugyldig data (ikke et tal)\";\n        return msg;\n    }\n\n    // Tjek om værdien er udenfor grænserne\n    if (vaerdi < limits.min || vaerdi > limits.max) {\n        // Byg en beskrivende fejlbesked\n        msg.payload = \"Fejl: \" + sensorNavn + \" værdi \" + vaerdi +\n            \" er udenfor range (\" + limits.min + \" - \" + limits.max + \")\";\n            node.status({fill:\"red\",shape:\"ring\",text:\"Fejl\"});\n        return msg;\n    }\n}\n\n// Returner null hvis alt er OK (så stopper flowet her)\nreturn null;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1820,"y":880,"wires":[["ce8f6330507346ad"]]}]